<div class="icon-preview-container">
  <mat-card class="preview-card">
    <mat-card-header>
      <mat-card-title>Preview</mat-card-title>
    </mat-card-header>
    
    <mat-card-content>
      <!-- Size Selector -->
      <div class="size-selector">
        <mat-label>Preview Size:</mat-label>
        <mat-button-toggle-group 
          [value]="currentPreviewSize"
          (change)="onPreviewSizeChange($event.value)"
          class="size-toggle-group">
          <mat-button-toggle 
            *ngFor="let size of previewSizes" 
            [value]="size.size">
            {{ size.name }}
          </mat-button-toggle>
        </mat-button-toggle-group>
      </div>

      <!-- Icon Preview -->
      <div class="preview-area" [class.with-background]="showBackground">
        <div class="icon-stack" [ngStyle]="getIconStackStyle()">
          <!-- Base Icon -->
          <span class="material-symbols-outlined">{{ composition.baseIcon }}</span>
          
          <!-- Modifier Icon -->
          <span 
            *ngIf="composition.modifierIcon"
            class="material-symbols-outlined"
            [class]="getModifierClasses()"
            [ngStyle]="getModifierStyle()">
            {{ composition.modifierIcon }}
          </span>
        </div>
      </div>

      <!-- Preview Details -->
      <div class="preview-details">
        <div class="detail-row">
          <span class="label">Base Icon:</span>
          <span class="value">{{ composition.baseIcon || 'None selected' }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Modifier:</span>
          <span class="value">{{ composition.modifierIcon || 'None selected' }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Position:</span>
          <span class="value">{{ composition.position }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Size:</span>
          <span class="value">{{ composition.size }}px</span>
        </div>
      </div>

      <!-- Background Toggle -->
      <div class="background-toggle">
        <mat-slide-toggle 
          [(ngModel)]="showBackground"
          color="primary">
          Show Background
        </mat-slide-toggle>
      </div>
    </mat-card-content>
  </mat-card>
</div>